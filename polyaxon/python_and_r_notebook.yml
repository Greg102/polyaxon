version: 1

kind: notebook

backend: lab

build:
  image: continuumio/miniconda3
  build_steps:
    - conda install -y python=3.7 r r-essentials
    - pip install jupyterlab
    - jupyter notebook --generate-config
    # Keep this to prevent problems with hanging notebooks
    - echo "c.NotebookApp.quit_button = False" >> ~/.jupyter/jupyter_notebook_config.py
    # This resolves some strange issue with fonts
    - conda install -y -c anaconda fonts-anaconda
